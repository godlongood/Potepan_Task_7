<!--検索フォーム-->
<% if user_signed_in? %>
  <div class="search_form">
    <%= form_with url: search_path, local: true, method: :get do |f| %> <!--検索の場合フォーム送信時にはgetリクエスト-->
      <%= f.text_field :word, placeholder: "キーワードを入力" %>
      <%= f.select :search, options_for_select([["エリア検索","forward_match"], ["あいまい検索（フリーワード検索）","partial_match"],]) %> <!--エリア検索は前方一致、あいまい検索は一部一致 切り替えはroom.rbに-->
      <%= f.submit "検索", class: "btn btn-primary" %>
    <% end %>
  </div>
<% end %>


<!--検索結果-->
<% if @searches.present? %>
  <table>
    <thead>
      <tr>
        <th>Image</th>
        <th>Name</th>
        <th>Address</th>
        <th>Price/日</th>
        <th>Intro</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
    <% @searches.each do |room| %>
      <tr>
        <td>
        <%= image_tag(room.image.present? ? room.image.url : "https://rails-02-sample.herokuapp.com/assets/room/default-image-4e0ac6b8d01335b5b22fe6586af13644ae51dddb6aeabf35b9174e80f13cd09d.png", size: "100x100") %>
        </td>
        <td><%= room.name %></td>
        <td><%= room.address %></td>
        <td><%= room.price %></td>
        <td><%= room.intro %></td>
        <td><%= room.updated_at? ? I18n.l(room.updated_at, format: :long) : "-" %></td>
        <td><%= room.created_at? ? I18n.l(room.created_at, format: :long) : "-" %></td>
        <td><%= link_to 'Show', room %></td>
        <td><%= link_to 'Edit', edit_room_path(room) %></td>
        <td><%= link_to 'Destroy', room, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
    </tbody>
  </table>
<% else %>
  <p>該当する部屋が見つかりませんでした。</p>
<% end %>

<%= link_to '部屋一覧', rooms_path %>